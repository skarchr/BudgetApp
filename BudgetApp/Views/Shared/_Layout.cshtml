@using System.Configuration
<!DOCTYPE html>
<html ng-app="budgetApp">
<head>
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>@ViewBag.Title - BudgetApp</title>
   @Styles.Render("~/Content/css")
   @Scripts.Render("~/bundles/modernizr")
   @Scripts.Render("~/bundles/jquery")
   @Scripts.Render("~/bundles/bootstrap")
   @Scripts.Render("~/bundles/bower")
   @Scripts.Render("~/bundles/angular")
   @RenderSection("scripts", required: false)
    <link rel="icon"
          type="image/png"
          href="../../Content/images/favicon.png" />
    </head>
    <body style="@(User.Identity.IsAuthenticated ? "" : "padding-top: 10px;")">
        
        <div class="row" ng-show="hideOnDomReady">

            <div class="spinner">
                <div class="ball"></div>
                <p>LOADING</p>
            </div>
        </div>

        @if (User.Identity.IsAuthenticated)
        {
            <div class="navbar-fixed-top scroll-top" ng-controller="toastrController" top-nav>
                <div class="container">
                    <div class="row">
                        <div class="col-xs-4">
                            <a href="@Url.Action("Index", "Home")" title="Dashboard">
                                
                                <svg id="piggy" style="height: 65px;position: fixed;z-index: 10000;" version="1.1" id="budgetAppLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 901 904" enable-background="new 0 0 373 375" xml:space="preserve">
                                    <defs>
                                        <style type="text/css">

                                            #piggy > #pig > #main > #coin { 
                                                -webkit-transition: all 1.0s;
                                                -moz-transition: all 1.0s;
                                                -ms-transition: all 1.0s;
                                                -o-transition: all 1.0s;
                                                transition: all 1.0s;
                                            }

                                            #piggy:hover > #pig >  #main > #coin {
                                                cy: 388.6;
                                                fill: yellow;
                                                z-index: 1000;
                                            }

                                            </style>
                                    </defs>
                                    <g id="ring">
                                        <circle fill="#0094FF" class="blue-stroke" stroke-width="91" stroke-miterlimit="10" cx="451.3" cy="451.7" r="402.3" />
                                    </g>
                                    <g id="pig">
                                        <g id="details">
                                            <path fill="none" class="blue-stroke" stroke-width="6" stroke-miterlimit="10" d="M606.8,364.3c0,0,6-19.4,6.7-20.4" />
                                            <path fill="none" class="blue-stroke" stroke-width="5.5391" stroke-miterlimit="10" d="M491,620.3c0,0,11.2,3.5,19.3,15.1" />
                                            <path fill="none" class="blue-stroke" stroke-width="5.5391" stroke-miterlimit="10" d="M345.5,615c0,0-15.1-4.4-35.1,9.2" />
                                            <path fill="none" class="blue-stroke" stroke-width="5.5391" stroke-miterlimit="10" d="M722.4,522.1c0,0-35.7,2.2-58.4-9.8" />

        
                                            <path class="blue-fill" d="M676.7,463.7c0,0,0.1,0.5,0.3,1.4c0.2,0.9,0.4,2.3,0.5,4.1c0.2,1.8,0.3,4,0.2,6.5c0,2.5-0.2,5.4-0.6,8.5
        				c-0.4,3.1-1.1,6.4-2,9.9c-1,3.4-2.2,7.1-3.9,10.6c-1.7,3.6-3.6,7.2-6,10.6c-2.3,3.5-5.1,6.7-7.9,9.8c-1.5,1.4-3,3-4.6,4.3
        				c-0.8,0.7-1.6,1.3-2.4,2l-1.2,1l-1.3,0.9c-1.7,1.2-3.3,2.5-5,3.5c-1.7,1.1-3.4,2.2-5.1,3.1c-0.9,0.5-1.7,0.9-2.6,1.4
        				c-0.8,0.5-1.7,0.9-2.5,1.3c-1.7,0.8-3.4,1.5-5,2.3c-3.3,1.2-6.5,2.5-9.5,3.3c-1.5,0.4-2.9,0.9-4.3,1.3c-1.4,0.3-2.7,0.6-3.9,0.9
        				c-1.2,0.3-2.4,0.5-3.4,0.8c-1.1,0.2-2.1,0.3-2.9,0.5c-3.5,0.6-5.6,0.8-5.6,0.8s1.9-0.7,5.3-1.9c0.8-0.3,1.8-0.6,2.8-1
        				c1-0.4,2.1-0.8,3.2-1.2c1.2-0.4,2.4-0.9,3.7-1.4c1.3-0.5,2.6-1.1,4-1.7c1.4-0.6,2.8-1.2,4.3-1.9c1.5-0.7,3-1.4,4.5-2.2
        				c1.5-0.8,3.1-1.7,4.6-2.5c1.6-0.8,3.1-1.9,4.7-2.8c3.2-2,6.3-4.2,9.4-6.6l1.2-0.9l1.1-1c0.7-0.6,1.5-1.3,2.2-1.9
        				c1.5-1.3,2.8-2.7,4.3-4.1c2.7-2.9,5.3-5.8,7.5-9c1.2-1.5,2.2-3.2,3.2-4.8c0.5-0.8,1-1.6,1.4-2.4c0.5-0.8,1-1.6,1.4-2.4
        				c1.7-3.3,3.1-6.6,4.4-9.8c1.1-3.2,2.1-6.3,2.9-9.2c0.7-2.9,1.3-5.6,1.6-8c0.4-2.4,0.6-4.6,0.8-6.3
        				C676.7,465.7,676.7,463.7,676.7,463.7z" />

        	
                                            <path fill="none" class="blue-stroke" stroke-width="6" stroke-miterlimit="10" d="M659.1,284.3c2.6,0.6,5.1,1.3,7.7,2.1
        			c2.2,0.7-3.7,10.3-4.6,11.4c-3.2,4.3-7.6,7.5-12,10.5c-7.6,5.1-13.8,10.1-19.7,16.9c-5.9,6.8-10.4,15.5-14.1,23.6" />



        
        
        		
                                            <ellipse transform="matrix(0.6471 0.7624 -0.7624 0.6471 528.6998 -343.5866)" fill="#0094FF" class="blue-stroke" stroke-width="3" stroke-miterlimit="10" cx="635.5" cy="399.3" rx="25.6" ry="10.1" />

        
                                            <path class="blue-fill" d="M366.9,283c0,0,0.5-0.2,1.5-0.6c1-0.4,2.4-0.8,4.2-1.4c1.8-0.6,4-1.2,6.5-1.8c2.5-0.7,5.4-1.3,8.6-1.9
        				c3.1-0.6,6.6-1.2,10.2-1.7c3.6-0.5,7.5-1,11.5-1.3c4-0.4,8.1-0.6,12.3-0.8c1.1,0,2.1-0.1,3.2-0.1c1,0,2.1,0,3.1,0
        				c2.1,0,4.2,0,6.4,0c4.3,0.1,8.5,0.2,12.7,0.5c4.2,0.3,8.3,0.7,12.3,1.1c4,0.5,7.8,1.1,11.4,1.7c1.8,0.3,3.6,0.7,5.3,1
        				c1.7,0.4,3.3,0.7,4.9,1.1c3.1,0.8,6,1.5,8.5,2.3c2.5,0.8,4.7,1.5,6.5,2.1c1.8,0.6,3.2,1.2,4.1,1.6c0.9,0.4,1.4,0.6,1.4,0.6
        				s-0.5,0.1-1.6,0.2c-1,0.1-2.5,0.2-4.4,0.4c-3.7,0.3-9.1,0.6-15.4,0.9c-6.3,0.3-13.6,0.4-21.5,0.5c-3.9,0-8,0.1-12.1,0
        				c-4.1,0-8.3-0.1-12.4-0.1c-4.1-0.1-8.4-0.2-12.4-0.3c-4.1-0.1-8.1-0.3-12.1-0.4c-3.9-0.2-7.7-0.4-11.3-0.6
        				c-3.6-0.2-7-0.4-10.2-0.7c-6.3-0.5-11.6-1-15.3-1.5c-1.9-0.2-3.3-0.4-4.3-0.6C367.4,283,366.9,283,366.9,283z" />
		
                                            <path fill="none" class="blue-stroke" stroke-width="6.9119" stroke-miterlimit="10" d="M525.5,308.8c0,0-1.7-9.7,9.4-23" />
                                        </g>
                                        <g id="main">
                                            <circle id="coin" fill="#FFFFFF" class="blue-stroke" stroke-width="6" stroke-miterlimit="10" cx="437.8" cy="188.6" r="55.7" />
                                            <path id="outline" fill="#FFF" class="blue-stroke" stroke-width="6" stroke-miterlimit="10" d="M182.7,349.9c3.9-1,7.8-2.1,11.4-3.9
			c3.6-1.8,6.9-4.4,8.7-8c2.5-4.6,1.8-10.1-1.2-14.3c-6.4-8.9-20.8-9.8-29.5-3.9c-9,6.1-14.3,17.2-10.6,27.9
			c3.1,9.2,10,17.1,17,23.6c1.9,1.7,16.4,15.1,15.9,16.2c-10.9,21.3-16.9,44.6-16.9,68.8c0,36.8,13.8,71.2,37.7,100.4
			c-21.8,56-20,74.3-20,74.3c12,48.7,60.8,34.2,60.8,34.2c25.9-13.3,54.4-41,54.5-41c34.8,14,74.5,22,116.7,22
			c30.1,0,58.9-4,85.6-11.4l-2.3,0.7c10,8.8,20.2,17.6,31.4,25c11.6,7.7,24.8,5.7,38.4,6c4.5,0.1,9.1,0.2,13.5-0.9
			c10.2-2.5,20-16.3,20.5-26.8c1.9-41.8,10.2-65.9,10.2-65.9c7.2-7,11.9-16.3,19.6-22.2c32.9-25.3,74.1-18.3,74.1-18.3l4.4-10.1
			c31.6-7,47.5-62,47.5-62c10.8-67.1-60.1-51.3-60.1-51.3c-53.8,6.3-93.7-60.7-93.7-60.7s-0.9-1.6-2.5-4.3
			c16.4-47.4,39.9-55.3,39.9-55.3c3.7-2.4,6.6-4.8,8.8-7c8.8-8.7,7.6-15.2,7.6-15.2c-72.2-21.5-133.6,19.1-133.6,19.1
			c-33-12.2-70-19.1-109.2-19.1c-93.8,0-175.4,39.3-218.1,97.4c-3.6-1.4-7.1-2.8-10.7-4.2c-5.9-2.3-12.2-4.1-16.7-9.1
			c-4.2-4.6-7.2-11.3-5.2-17.6c1.4-4.5,5.8-8.1,10.5-7.7c3.4,0.3,6.4,2.6,8.1,5.6c2,3.5,2.1,8.3-0.4,11.5c-3.2,4.1-8.6,4.1-13.3,4.8
			" />
                                            <g id="tail">
                                                <path class="blue-fill" d="M163,354.1c0,0-2.1-0.2-5.3-0.5c-3.2-0.3-7.5-0.7-11.8-1.3c-4.3-0.6-8.6-1.4-11.7-2.3
				c-1.6-0.4-2.8-0.8-3.7-1.2c-0.9-0.3-1.4-0.5-1.4-0.5s0.5,0.1,1.5,0.2c0.9,0.1,2.2,0.3,3.8,0.5c3.2,0.3,7.4,0.4,11.7,0.2
				c4.2-0.2,8.5-0.5,11.7-0.8c3.2-0.3,5.4-0.4,5.4-0.4L163,354.1z" />
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                                                               
                            </a>
                        </div>
                        <div class="col-xs-4 text-center" style="padding-top: 18px;">

                            <ul class="list-unstyled list-inline hidden-xs hidden-sm">
                                <li>
                                    <a href="@Url.Action("Create", "Transactions")" class="btn btn-default btn-nav btn-sm btn-round text-center @(ViewBag.Title == "Add Transaction" ? "active":"")" title="Add transaction" style="min-width: 40px;">
                                               <i class="glyphicon glyphicon-plus"></i>
                                          </a>
                                </li>
                                <li>
                                    <a href="@Url.Action("Upload", "Transactions")" class="btn btn-default btn-nav btn-sm btn-round text-center @(ViewBag.Title == "Import Transactions" ? "active" : "")" title="Import transactions" style="min-width: 40px;" >
                                              <i class="glyphicon glyphicon-import"></i>
                                          </a>
                                </li>
                            </ul>

                        </div>
                        <div class="col-xs-4 text-right" style="padding-top: 13px;">
                            @Html.Partial("_LoginPartial")
                        </div>
                    </div>
                </div>
            </div>

        }
        <div class="container body-content" ng-cloak scroll-position>

            @RenderBody()


            <footer class="text-center" style="margin-top:100px; ">
                
                @{
                    if (ConfigurationManager.AppSettings["debugmode"] == "true")
                    {
                        <p class="text-warning">Debug mode</p>
                    }

                    if (!String.IsNullOrEmpty(ViewBag.Link))
                    {
                        <p class="text-danger">
                            For local debug only: confirmation link: <a href="@ViewBag.Link">link</a>
                        </p>
                    }
                    if (!String.IsNullOrEmpty(ViewBag.Code))
                    {
                        <p class="text-danger">
                            For local debug only: @ViewBag.Code
                        </p>
                    }
}
                <br />
                <br />
                <div class="row text-center">
                    <div class="col-xs-12 text-muted">Icons made by <a href="http://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a></div>
                </div>

            </footer>

        </div>
        <script>
            (function () {
                'use strict';

                angular.module('budgetApp').factory('viewBags', function () {

                    return {
                        messages: {
                            error: '@ViewBag.Error',
                            success: '@ViewBag.Success',
                            info: '@ViewBag.Info',
                            statusMessage : '@ViewBag.StatusMessage'
                        }
                    };

                });

            })();

        </script>

    </body>

</html>
