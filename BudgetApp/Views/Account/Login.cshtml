@using BudgetApp.Extensions
@using BudgetApp.Models
@model LoginViewModel
@{
   ViewBag.Title = "Log in";
}

<div class="row" style="margin-top: 20px;" ng-controller="loginController">

    <div class="col-md-12 text-center" style="margin-bottom: 20px;">

        @*<svg data-logo data-from="0.7" data-to="1.0" data-reload="@Html.ViewData.ModelState.IsValid" xmlns="http://www.w3.org/2000/svg" version="1.0" width="200" height="200" viewbox="0 0 200 200" preserveaspectratio="xMidYMid meet">
            <g class="pig-color" transform="translate(0.000000,200.000000) scale(0.100000,-0.100000)" fill="#296ad4" stroke="none">
                <path d="M866 1990 c-413 -65 -727 -347 -833 -749 -22 -82 -26 -117 -26 -241 0 -124 4 -159 26 -241 48 -183 135 -335 263 -463 128 -128 280 -215 463 -263 82 -22 117 -26 241 -26 124 0 159 4 241 26 365 97 629 361 726 726 22 82 26 117 26 241 0 124 -4 159 -26 241 -97 365 -365 633 -726 725 -109 28 -280 39 -375 24z m144 -275 c32 -17 60 -61 60 -95 0 -55 -57 -110 -115 -110 -58 0 -115 55 -115 110 0 81 95 134 170 95z m399 -193 c19 -9 39 -26 45 -37 6 -11 16 -23 21 -27 6 -4 -4 -8 -20 -8 -41 0 -55 -16 -55 -61 0 -27 8 -44 31 -68 30 -32 79 -123 79 -148 0 -21 34 -15 74 12 48 32 58 32 93 -8 56 -63 85 -237 43 -257 -8 -4 -39 -18 -67 -31 -29 -12 -53 -25 -53 -29 0 -4 9 -15 21 -26 12 -10 27 -31 35 -45 17 -34 3 -48 -63 -60 -57 -11 -61 -14 -128 -110 -31 -44 -60 -79 -65 -79 -6 0 -7 -24 -3 -61 9 -86 3 -89 -164 -89 -126 0 -133 1 -133 20 0 19 -7 20 -115 20 -108 0 -115 -1 -115 -20 0 -19 -7 -20 -130 -20 l-130 0 -73 75 c-131 137 -185 253 -194 415 -3 56 -1 111 6 135 7 27 7 41 1 43 -33 11 -71 58 -85 104 -12 43 -13 54 -1 83 28 67 122 93 168 47 18 -18 20 -26 12 -40 -12 -18 -40 -20 -86 -8 -21 6 -29 4 -34 -8 -10 -27 24 -56 65 -55 31 0 41 7 74 49 70 93 185 170 340 228 59 22 88 26 162 26 50 -1 119 -8 155 -17 l65 -16 40 38 c22 21 47 41 55 44 32 11 96 6 129 -11z" />
            </g>
        </svg>*@

        <svg data-logo data-from="0.7" data-to="1.0" xmlns="http://www.w3.org/2000/svg" height="200" width="200" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_2" x="0px" y="0px" viewBox="0 0 454 454" enable-background="new 0 0 454 454" xml:space="preserve">
            <path stroke="#296ad4" fill="#296ad4" stroke-width="2" stroke-miterlimit="10" d="M121.8,355.8c-2.9-4.9-7.5-8-11.1-12.3  c-5.1-5.9-9.7-12.3-13.7-18.9c-17.7-29.2-23.5-62.3-19-95.9c0.3-2.5,1.4-5.2,2.1-7.7c-7.5-3.9-13.7-10.2-17.5-17.8  c-1.6-3.1-2.7-6.5-3.6-9.9c-0.9-3.6-1.5-7.4-1-11.1c1.6-10.6,12.8-17.7,23.5-18.5c4.7-0.3,9.8,0.4,13.2,3.6c4.5,4.3,3.8,11.4-2,12.4  c-6.8,1.2-13.3-6.8-20.2-1c-2.2,1.9-3.3,4.9-2.8,7.8c0.7,3.8,4,6.6,7.6,7.9c3.6,1.3,7.5,1.2,11.3,1.2c7.8-0.1,12.3-10.2,17-15.4  c5.9-6.6,12.4-12.7,19.3-18.2c14.2-11.4,30.2-20.4,47.3-26.6c15.3-5.5,31.6-9.3,47.9-9.9c15.1-0.6,30.3,6.5,45.1,4.9  c9-0.9,15-9.4,22.7-13.8c11.4-6.6,26.9-5.4,37.1,2.9c2.5,2,4.8,5.5,3.1,8.2c-4.1,6.6-16.2-2.6-22.2,6c-7.9,11.3,8.1,21.5,15.4,27.6  c5.8,4.9,10.8,10.9,14.1,17.7c2.6,5.4,2.7,18.8,9.7,20.1c9.5,1.9,13.9-5.9,21.7-8.8c14.5-5.3,22.1,22.3,24.6,32  c2.1,8.4,4.3,20.2-1.4,27.7c-5,6.6-13.9,9.7-21.3,12.7c-4.2,1.7-7.6,1.7-7,5.9c0.9,5.1,18.8,12.8,13,20.1c0,0-2.7,3.3-4.7,4  c-13.9,4.6-24.5,6.1-34.1,18.6c-5.6,7.4-10.1,15.6-16.2,22.6c-4.9,5.6-6.6,13.3-3.8,20.4c0.4,1,1,2,1.6,2.9" />
            <g fill="#296ad4">
                <circle fill="none" stroke="#296ad4" stroke-width="34" stroke-miterlimit="10" cx="227.2" cy="226.8" r="207.5" />
                <rect x="71" y="335.5" stroke="#296ad4" stroke-width="2.5953" stroke-miterlimit="10" width="313.5" height="46.5" />
                <rect x="115.5" y="377.5" stroke="#296ad4" stroke-width="2.5953" stroke-miterlimit="10" width="221" height="40.5" />
            </g>
        </svg>
    </div>

    <div data-slide-down data-prevent="@Html.ViewData.ModelState.IsValid" class="col-md-12 text-center">
        <section id="loginForm">
            @using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form", @name = "loginForm", @id = "loginForm" }))
            {
                @Html.AntiForgeryToken()

                @Html.MyValidationSummary()

                <div class="form-group input-box">
                    <div class="col-md-12">
                        @Html.TextBoxFor(m => m.Email, new { @class = "form-control center", @placeholder = "Email", @autocomplete = "off", @required="required", @ng_model="model.Email" })
                    </div>
                </div>
                <div class="form-group input-box">
                    <div class="col-md-12">
                        @Html.PasswordFor(m => m.Password, new { @class = "form-control center", @placeholder = "Password", @required = "required", @ng_model = "model.Password" })
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-12 center" style="width: 280px;padding:0;">

                        @Html.ActionLink("Forgot your password?", "ForgotPassword", null, new { @class = "btn btn-link", @style = "float:left;padding-left:0;" })

                        <input type="submit" value="Log in" style="float:right;" class="btn btn-primary" ng-disabled="loginForm.$invalid" />

                    </div>
                </div>

            }

            @Html.Partial("_ExternalLoginsListPartial", new ExternalLoginListViewModel { ReturnUrl = ViewBag.ReturnUrl })

            <p style="margin-top: 50px;">
                @Html.ActionLink("Register", "Register") if you don't have an account.
            </p>

        </section>
    </div>
</div>

@if (!Html.ViewData.ModelState.IsValid)
{
    <script>
        (function () {

            $('.notification-warnings').velocity("transition.slideUpIn", 1250);

            $('.input-box').velocity('callout.shake');

        })();
    </script>
}

@Html.Partial("_LoginModel", Html.Raw(Model.ToJson()))